<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Posted Jobs - SmartRecruit</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-hover: #1d4ed8;
            --secondary-color: #64748b;
            --success-color: #22c55e;
            --error-color: #ef4444;
            --background-color: #f8fafc;
            --card-background: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-primary);
            line-height: 1.5;
        }

        .navbar {
            background-color: var(--card-background);
            padding: 1rem 2rem;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .navbar-brand {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
        }

        .navbar-menu {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .navbar-menu a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s;
        }

        .navbar-menu a:hover {
            color: var(--primary-color);
        }

        .navbar-menu a.active {
            color: var(--primary-color);
        }

        .user-menu {
            position: relative;
            display: inline-block;
        }

        .user-menu-button {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .user-menu-content {
            display: none;
            position: absolute;
            right: 0;
            background-color: var(--card-background);
            min-width: 200px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            border-radius: 0.5rem;
            padding: 0.5rem;
            z-index: 1000;
        }

        .user-menu-content.show {
            display: block;
        }

        .user-menu-content a {
            display: block;
            padding: 0.5rem 1rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 0.25rem;
        }

        .user-menu-content a:hover {
            background-color: var(--background-color);
            color: var(--primary-color);
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .page-header {
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .page-header h1 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .action-button {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .primary-button {
            background-color: var(--primary-color);
            color: white;
        }

        .primary-button:hover {
            background-color: var(--primary-hover);
        }

        .filters-section {
            background-color: var(--card-background);
            padding: 1.5rem;
            border-radius: 0.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
        }

        .filters-form {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-group label {
            font-weight: 500;
            color: var(--text-primary);
        }

        .filter-group select, 
        .filter-group input {
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            font-size: 1rem;
        }

        .filter-group select:focus, 
        .filter-group input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .filter-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .job-list {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .job-card {
            background-color: var(--card-background);
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 1.5rem;
        }

        .job-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .job-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .job-date {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .job-description {
            color: var(--text-primary);
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .job-details {
            display: flex;
            gap: 2rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .job-detail {
            display: flex;
            flex-direction: column;
        }

        .detail-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
        }

        .detail-value {
            color: var(--text-primary);
            font-weight: 500;
        }

        .job-tags {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .job-tag {
            background-color: var(--background-color);
            color: var(--text-secondary);
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.875rem;
        }

        .job-actions {
            display: flex;
            gap: 1rem;
        }

        .job-stats {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            gap: 1rem;
            padding: 1rem;
            background-color: var(--background-color);
            border-radius: 0.5rem;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 2rem;
            gap: 0.5rem;
        }

        .pagination button {
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--border-color);
            background-color: var(--card-background);
            border-radius: 0.25rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .pagination button:hover {
            background-color: var(--background-color);
        }

        .pagination button.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Style for alert messages */
        .alert {
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 0.5rem;
            text-align: center;
        }

        .alert-success {
            background-color: #dcfce7;
            color: #166534;
        }

        .alert-error {
            background-color: #fee2e2;
            color: #991b1b;
        }

        #messageContainer {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            min-width: 300px;
        }

        #messageContainer .alert {
            animation: slideIn 0.3s ease-out forwards, slideOut 0.3s ease-in forwards 3s;
        }

        @keyframes slideIn {
            from {
                transform: translateX(-50%) translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            from {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
            to {
                transform: translateX(-50%) translateY(-100%);
                opacity: 0;
            }
        }

        @media (max-width: 768px) {
            .navbar {
                padding: 1rem;
            }

            .navbar-menu {
                display: none;
            }

            .container {
                padding: 0 1rem;
            }

            .job-card {
                grid-template-columns: 1fr;
            }

            .job-stats {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: space-around;
            }

            .job-actions {
                flex-direction: column;
            }

            .action-button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <a href="recruiter-dashboard.html" class="navbar-brand">SmartRecruit</a>
        <div class="navbar-menu">
            <a href="recruiter-dashboard.html">Dashboard</a>
            <a href="posted-jobs.html" class="active">Posted Jobs</a>
            <a href="applications-dashboard.html">Applications</a>
            <a href="#">Profile</a>
        </div>
        <div class="user-menu">
            <button class="user-menu-button" onclick="toggleUserMenu()">
                <span id="userName">Loading...</span>
                <span>▼</span>
            </button>
            <div id="userMenuContent" class="user-menu-content">
                <div class="user-menu-item" onclick="showProfile()">Profile</div>
                <div class="user-menu-item" onclick="showSettings()">Settings</div>
                <div class="user-menu-item" onclick="window.location.href='student-profile.html?demo=true'">View Demo Student Profile</div>
                <div class="user-menu-item" onclick="logout()">Logout</div>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <h1>Posted Jobs</h1>
            <a href="recruiter-dashboard.html#post-job" class="action-button primary-button">
                <span>+</span> Post New Job
            </a>
        </div>

        <!-- Filters Section -->
        <div class="filters-section">
            <form class="filters-form" id="jobFilters">
                <div class="filter-group">
                    <label for="filterJobType">Job Type</label>
                    <select id="filterJobType">
                        <option value="">All Types</option>
                        <option value="full-time">Full Time</option>
                        <option value="part-time">Part Time</option>
                        <option value="internship">Internship</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="filterExperience">Experience Level</label>
                    <select id="filterExperience">
                        <option value="">All Levels</option>
                        <option value="entry">Entry Level</option>
                        <option value="mid">Mid Level</option>
                        <option value="senior">Senior Level</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="filterLocation">Location</label>
                    <input type="text" id="filterLocation" placeholder="City, State, or Remote">
                </div>
                <div class="filter-group">
                    <label for="sortBy">Sort By</label>
                    <select id="sortBy">
                        <option value="newest">Newest</option>
                        <option value="oldest">Oldest</option>
                        <option value="applications">Most Applications</option>
                    </select>
                </div>
            </form>
            <div class="filter-actions">
                <button class="action-button primary-button" onclick="applyFilters()">Apply Filters</button>
                <button class="action-button" onclick="resetFilters()">Reset</button>
            </div>
        </div>

        <!-- Jobs List -->
        <div class="job-list" id="jobsList">
            <!-- Jobs will be loaded dynamically -->
            <div class="loading" id="jobsLoading" style="text-align: center; padding: 2rem;">
                Loading jobs...
            </div>
        </div>

        <!-- Pagination -->
        <div class="pagination" id="pagination">
            <!-- Pagination buttons will be added dynamically -->
        </div>
    </div>

    <!-- Message container for alerts -->
    <div id="messageContainer"></div>

    <!-- Load DomPurify library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.3.3/purify.min.js"></script>

    <script>
        // Utility function to create and display alerts
        function showAlert(message, type = 'success') {
            const messageContainer = document.getElementById('messageContainer');
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;

            messageContainer.appendChild(alertDiv);

            setTimeout(() => {
                alertDiv.remove();
            }, 3000);
        }

        // Utility function to sanitize HTML
        function sanitizeHTML(html) {
            return DOMPurify.sanitize(html);
        }

        // Securely get data from cookies
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
            return null;
        }

        // Check authentication
        function checkAuth() {
            // Try getting token from both cookie and localStorage for compatibility
            let token = getCookie('token');
            if (!token) {
                token = localStorage.getItem('token');
            }
            
            let user = localStorage.getItem('user');

            if (user) {
                // Parse the JSON data
                user = JSON.parse(user);
                if (!token || !user || user.user_type !== 'recruiter') {
                    // If in demo mode, load demo profile instead of redirecting
                    if (window.location.search.includes('demo=true')) {
                        loadDemoProfile();
                        return;
                    }
                    window.location.href = 'index.html';
                    return;
                }

                // Update UI with user data
                document.getElementById('userName').textContent = sanitizeHTML(user.full_name);
                return;
            }
            else {
                // If in demo mode, load demo profile instead of redirecting
                if (window.location.search.includes('demo=true')) {
                    loadDemoProfile();
                    return;
                }
                // No localstorage user. Redirect
                window.location.href = 'index.html';
            }
        }

        // Load demo profile
        function loadDemoProfile() {
            const demoUser = {
                id: 1001,
                full_name: "Demo Recruiter",
                email: "demo.recruiter@example.com",
                user_type: "recruiter",
                company: "TechCorp Solutions"
            };
            
            // Update UI with demo user data
            document.getElementById('userName').textContent = sanitizeHTML(demoUser.full_name);
            
            // Store demo user in localStorage
            localStorage.setItem('user', JSON.stringify(demoUser));
            
            // Show a demo mode notification
            showAlert('Running in demo mode', 'success');

            // Load demo jobs
            loadJobs();
        }

        // Toggle user menu
        function toggleUserMenu() {
            const menu = document.getElementById('userMenuContent');
            menu.classList.toggle('show');
        }

        // Close user menu when clicking outside
        window.addEventListener('click', function(event) {
            const menu = document.getElementById('userMenuContent');
            const button = document.querySelector('.user-menu-button');

            if (!menu.contains(event.target) && !button.contains(event.target)) {
                menu.classList.remove('show');
            }
        });

        // Format date
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }

        // Get random date within the last 30 days for demo jobs
        function getRandomDate() {
            const now = new Date();
            const pastDate = new Date(now.getTime() - Math.random() * 30 * 24 * 60 * 60 * 1000);
            return pastDate.toISOString();
        }

        // Load jobs
        async function loadJobs() {
            const jobsList = document.getElementById('jobsList');
            const jobsLoading = document.getElementById('jobsLoading');
            
            try {
                const response = await fetch('http://localhost:8000/api/jobs/recruiter', {
                    headers: {
                        'Authorization': `Bearer ${getCookie('token') || localStorage.getItem('token')}`
                    }
                });

                jobsLoading.style.display = 'none';

                if (!response.ok) {
                    throw new Error('Failed to fetch jobs');
                }

                const jobs = await response.json();
                
                // If no jobs or in demo mode, load demo jobs
                if (!jobs || jobs.length === 0 || window.location.search.includes('demo=true')) {
                    loadDemoJobs();
                    return;
                }
                
                displayJobs(jobs);
            } catch (error) {
                console.error('Error loading jobs:', error);
                jobsLoading.style.display = 'none';
                showAlert('Using demo data instead of API', 'success');
                loadDemoJobs();
            }
        }

        // Load demo jobs
        function loadDemoJobs() {
            const demoJobs = [
                {
                    id: 1,
                    title: "Senior Software Engineer",
                    description: "We are looking for an experienced software engineer with expertise in React, Node.js, and cloud technologies to join our growing team. The ideal candidate will have 5+ years of experience building scalable web applications and a strong understanding of software design patterns.",
                    location: "San Francisco, CA (Remote)",
                    type: "full-time",
                    experience_level: "senior",
                    salary_range: "$120,000 - $160,000",
                    posted_date: getRandomDate(),
                    applications_count: 12,
                    views_count: 245
                },
                {
                    id: 2,
                    title: "UX/UI Designer",
                    description: "Join our design team to create beautiful, intuitive interfaces for our flagship product. Experience with Figma and user research required. You'll work closely with product managers and developers to deliver exceptional user experiences.",
                    location: "New York, NY",
                    type: "full-time",
                    experience_level: "mid",
                    salary_range: "$90,000 - $120,000",
                    posted_date: getRandomDate(),
                    applications_count: 8,
                    views_count: 187
                },
                {
                    id: 3,
                    title: "Data Science Intern",
                    description: "Great opportunity for students to gain hands-on experience with machine learning, data visualization, and big data technologies. You'll work on real-world problems with our data science team and learn industry best practices.",
                    location: "Remote",
                    type: "internship",
                    experience_level: "entry",
                    salary_range: "$25/hour",
                    posted_date: getRandomDate(),
                    applications_count: 21,
                    views_count: 302
                },
                {
                    id: 4,
                    title: "DevOps Engineer",
                    description: "Looking for a DevOps engineer to help maintain and improve our CI/CD pipelines, cloud infrastructure, and monitoring systems. Experience with AWS, Kubernetes, and Terraform is highly desired.",
                    location: "Chicago, IL",
                    type: "full-time",
                    experience_level: "mid",
                    salary_range: "$100,000 - $130,000",
                    posted_date: getRandomDate(),
                    applications_count: 6,
                    views_count: 156
                },
                {
                    id: 5,
                    title: "Marketing Coordinator",
                    description: "Join our marketing team to help plan and execute digital marketing campaigns, manage social media accounts, and analyze campaign performance. Strong communication skills and creativity required.",
                    location: "Boston, MA (Hybrid)",
                    type: "part-time",
                    experience_level: "entry",
                    salary_range: "$50,000 - $60,000",
                    posted_date: getRandomDate(),
                    applications_count: 15,
                    views_count: 210
                }
            ];
            
            displayJobs(demoJobs);
            setupPagination(1, Math.ceil(demoJobs.length / 5));
        }

        // Display jobs
        function displayJobs(jobs) {
            const jobsList = document.getElementById('jobsList');
            jobsList.innerHTML = '';

            if (jobs.length === 0) {
                jobsList.innerHTML = '<div style="text-align: center; padding: 2rem;">No jobs found matching your filters.</div>';
                return;
            }

            jobs.forEach(job => {
                // Sanitize job data
                const sanitizedTitle = sanitizeHTML(job.title);
                const sanitizedDescription = sanitizeHTML(job.description);
                const sanitizedLocation = sanitizeHTML(job.location);
                const sanitizedType = sanitizeHTML(job.type);
                const sanitizedExperienceLevel = sanitizeHTML(job.experience_level);
                const sanitizedSalaryRange = sanitizeHTML(job.salary_range);
                const formattedDate = job.posted_date ? formatDate(job.posted_date) : 'Recent';

                const jobCard = document.createElement('div');
                jobCard.className = 'job-card';
                jobCard.innerHTML = `
                    <div class="job-content">
                        <div class="job-header">
                            <h2 class="job-title">${sanitizedTitle}</h2>
                            <span class="job-date">Posted: ${formattedDate}</span>
                        </div>
                        <p class="job-description">${sanitizedDescription}</p>
                        <div class="job-details">
                            <div class="job-detail">
                                <span class="detail-label">Location</span>
                                <span class="detail-value">${sanitizedLocation}</span>
                            </div>
                            <div class="job-detail">
                                <span class="detail-label">Job Type</span>
                                <span class="detail-value">${sanitizedType.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}</span>
                            </div>
                            <div class="job-detail">
                                <span class="detail-label">Experience</span>
                                <span class="detail-value">${sanitizedExperienceLevel.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}</span>
                            </div>
                            <div class="job-detail">
                                <span class="detail-label">Salary Range</span>
                                <span class="detail-value">${sanitizedSalaryRange}</span>
                            </div>
                        </div>
                        <div class="job-tags">
                            <span class="job-tag">${sanitizedType}</span>
                            <span class="job-tag">${sanitizedExperienceLevel}</span>
                        </div>
                        <div class="job-actions">
                            <button class="action-button primary-button" onclick="viewApplications(${job.id})">View Applications</button>
                            <button class="action-button" onclick="editJob(${job.id})">Edit</button>
                            <button class="action-button" style="background-color: var(--error-color); color: white;" onclick="deleteJob(${job.id})">Delete</button>
                        </div>
                    </div>
                    <div class="job-stats">
                        <div class="stat-item">
                            <span class="stat-value">${job.applications_count || 0}</span>
                            <span class="stat-label">Applications</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value">${job.views_count || 0}</span>
                            <span class="stat-label">Views</span>
                        </div>
                    </div>
                `;
                jobsList.appendChild(jobCard);
            });

            // Setup pagination
            const totalPages = Math.ceil(jobs.length / 5);
            setupPagination(1, totalPages);
        }

        // Setup pagination
        function setupPagination(currentPage, totalPages) {
            const pagination = document.getElementById('pagination');
            pagination.innerHTML = '';

            if (totalPages <= 1) {
                return;
            }

            // Previous button
            const prevButton = document.createElement('button');
            prevButton.textContent = '←';
            prevButton.disabled = currentPage === 1;
            prevButton.onclick = () => changePage(currentPage - 1);
            pagination.appendChild(prevButton);

            // Page buttons
            for (let i = 1; i <= totalPages; i++) {
                const pageButton = document.createElement('button');
                pageButton.textContent = i;
                pageButton.classList.toggle('active', i === currentPage);
                pageButton.onclick = () => changePage(i);
                pagination.appendChild(pageButton);
            }

            // Next button
            const nextButton = document.createElement('button');
            nextButton.textContent = '→';
            nextButton.disabled = currentPage === totalPages;
            nextButton.onclick = () => changePage(currentPage + 1);
            pagination.appendChild(nextButton);
        }

        // Change page
        function changePage(page) {
            // In a real application, this would fetch data for the specific page
            // For demo, we just update the active button
            const buttons = document.querySelectorAll('.pagination button');
            buttons.forEach(button => {
                if (button.textContent === page.toString()) {
                    button.classList.add('active');
                } else if (button.textContent !== '←' && button.textContent !== '→') {
                    button.classList.remove('active');
                }
            });
        }

        // Apply filters
        function applyFilters() {
            const jobType = document.getElementById('filterJobType').value;
            const experienceLevel = document.getElementById('filterExperience').value;
            const location = document.getElementById('filterLocation').value.toLowerCase();
            const sortBy = document.getElementById('sortBy').value;

            // In a real application, this would send filtered parameters to the API
            // For demo, we'll just show a message and reload the demo jobs
            showAlert('Filters applied successfully', 'success');
            loadDemoJobs();
        }

        // Reset filters
        function resetFilters() {
            document.getElementById('filterJobType').value = '';
            document.getElementById('filterExperience').value = '';
            document.getElementById('filterLocation').value = '';
            document.getElementById('sortBy').value = 'newest';
            showAlert('Filters reset', 'success');
            loadDemoJobs();
        }

        // View applications for a specific job
        function viewApplications(jobId) {
            // In a real application, this would navigate to a job applications page
            showAlert(`Viewing applications for job #${jobId}`, 'success');
        }

        // Edit a job
        function editJob(jobId) {
            // In a real application, this would open a form to edit the job
            showAlert(`Editing job #${jobId}`, 'success');
        }

        // Delete a job
        function deleteJob(jobId) {
            if (!confirm('Are you sure you want to delete this job?')) {
                return;
            }

            // In a real application, this would send a DELETE request to the API
            showAlert('Job deleted successfully', 'success');
            loadDemoJobs();
        }

        // Profile functions
        function showProfile() {
            // Implement profile view
            showAlert('Profile feature coming soon', 'success');
        }

        function showSettings() {
            // Implement settings view
            showAlert('Settings feature coming soon', 'success');
        }

        // Logout
        function logout() {
            // Clear localStorage items
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            localStorage.removeItem('userType');
            localStorage.removeItem('userName');
            
            // Clear cookies by setting expiration to the past
            document.cookie = `token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;
            
            // Redirect to login page
            window.location.href = 'index.html';
        }

        // Initialize page
        window.addEventListener('load', function() {
            checkAuth();
            loadJobs();
        });
    </script>
</body>
</html> 